<!-- templates/lab8/create.html -->
{% extends "lab8/base.html" %}

{% block title %}–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 8{% endblock %}

{% block content %}
<h2 style="margin-bottom: 30px; color: #2c3e50;">–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏</h2>

{% if error %}
    <div class="error">{{ error }}</div>
{% endif %}

<div style="max-width: 800px; margin: 0 auto;">
    <form action="/lab8/create" method="post">
        <div style="background: #f8f9fa; padding: 30px; border-radius: 10px; margin-bottom: 30px;">
            <div style="margin-bottom: 25px;">
                <label for="title" style="display: block; margin-bottom: 10px; font-weight: 600; color: #34495e;">
                    –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏:
                </label>
                <input type="text" id="title" name="title" required value="{{ title|default('') }}"
                       style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; 
                              font-size: 16px; transition: border-color 0.3s ease;"
                       onfocus="this.style.borderColor='#3498db'"
                       onblur="this.style.borderColor='#ddd'"
                       maxlength="100">
                <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                    <small style="color: #7f8c8d;">–ú–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤</small>
                    <small id="title-counter" style="color: #95a5a6;">0/100</small>
                </div>
            </div>
            
            <div style="margin-bottom: 25px;">
                <label for="article_text" style="display: block; margin-bottom: 10px; font-weight: 600; color: #34495e;">
                    –¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏:
                </label>
                <textarea id="article_text" name="article_text" required 
                          style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; 
                                 font-size: 16px; min-height: 300px; resize: vertical; 
                                 transition: border-color 0.3s ease;"
                          onfocus="this.style.borderColor='#3498db'"
                          onblur="this.style.borderColor='#ddd'"
                          maxlength="5000">{{ article_text|default('') }}</textarea>
                <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                    <small style="color: #7f8c8d;">–ú–∞–∫—Å–∏–º—É–º 5000 —Å–∏–º–≤–æ–ª–æ–≤</small>
                    <small id="text-counter" style="color: #95a5a6;">0/5000</small>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="is_public" name="is_public" checked 
                           style="margin-right: 10px; width: 18px; height: 18px;">
                    <span style="color: #34495e; font-weight: 600;">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞—Ç—å—é –ø—É–±–ª–∏—á–Ω–æ–π</span>
                </label>
                <small style="color: #7f8c8d; display: block; margin-top: 5px;">
                    –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –≤–∏–¥–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ ‚Äî —Ç–æ–ª—å–∫–æ –≤–∞–º
                </small>
            </div>
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <a href="/lab8/articles" 
               style="color: #7f8c8d; text-decoration: none; font-weight: 600; padding: 12px 24px; 
                      border: 2px solid #95a5a6; border-radius: 25px; transition: all 0.3s ease;">
                ‚Üê –û—Ç–º–µ–Ω–∞
            </a>
            
            <button type="submit" 
                    style="background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); color: white; 
                           padding: 12px 30px; border: none; border-radius: 25px; font-size: 16px; 
                           font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                üìù –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é
            </button>
        </div>
    </form>
</div>

<script>
// –°—á–µ—Ç—á–∏–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤
document.addEventListener('DOMContentLoaded', function() {
    const titleInput = document.getElementById('title');
    const textArea = document.getElementById('article_text');
    const titleCounter = document.getElementById('title-counter');
    const textCounter = document.getElementById('text-counter');
    
    function updateCounter(input, counter, max) {
        counter.textContent = input.value.length + '/' + max;
        if (input.value.length > max * 0.9) {
            counter.style.color = '#e74c3c';
        } else {
            counter.style.color = '#95a5a6';
        }
    }
    
    titleInput.addEventListener('input', function() {
        updateCounter(titleInput, titleCounter, 100);
    });
    
    textArea.addEventListener('input', function() {
        updateCounter(textArea, textCounter, 5000);
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤
    updateCounter(titleInput, titleCounter, 100);
    updateCounter(textArea, textCounter, 5000);
});
</script>
{% endblock %}